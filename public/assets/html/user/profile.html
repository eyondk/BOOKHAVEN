<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">   
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"> 
    <link rel="stylesheet" href="<?=ROOT?>/assets/css/profile.css"/>
    <link rel="icon" type="image/png" href="<?=ROOT?>/assets/images/bh.png">
    <title>Profile</title>
    
</head>
<body>
     <div class="container">
      <div class="btn-group" role="group" aria-label="Basic example">
        <button type="button" class="custom-btn" onclick="showProfile()">Account Info</button>
        <button type="button" class="custom-btn" onclick="showEditAccount()">Edit Account</button>
        <button type="button" class="custom-btn" onclick="showChangePassword()">Change Password</button>
      </div>
    </div>
    
    
    <div id="profile" class="profile">
      <div class="profile-header">
        <h1>Profile Information</h1>
      </div>
      <div class="profile-content row">
        <div class="profile-picture col-md-4">
          <img src="https://tinyurl.com/26jhy39y" alt="Profile Picture">
        </div>
        <div class="profile-details col-md-8">
          <h2><?=$user_fname?> <?=$user_lname?></h2>
          <p>Email: <?=$user_email?></p>
          <p>Address: <?=$user_address?></p>
          <p>Contact Number: <?=$user_contact_num?></p>
          <div class="mt-4 ps-4">
            <button type="button" class="btn btn-danger w-100 fs-6" data-bs-toggle="modal" data-bs-target="#modal-deleteAcc">
              Delete Account
            </button>
          </div>
        </div>
      </div>

      <div class="modal fade" id="modal-deleteAcc" tabindex="-1" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modal-title">Delete Account</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
              <form action="" method="post" enctype="multipart/form-data" class="modal-deleteAcc-form">
                <?php if (!empty($errors)):?>
                  <div class="alert alert-dark">
                    <?= implode("<br>", $errors) ?>
                  </div>
                <?php endif;?>
                <div class="modal-body">
                  <div class="profile-content">
                    <p>Are you sure to delete this account?</p>
                    <input type="hidden" name="user_id" value="<?= $user_id ?>">
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">Cancel</button>
                  <button type="submit" id="delete_user" name="delete_user" class="btn btn-danger">Delete</button>
                </div>
              </form>
          </div>
        </div>
      </div>
    </div>
    
    <div id="editAccount" class="profile" style="display: none;">
      <div class="profile-header">
        <h1>Edit Profile</h1>
      </div>
      
      <div class="profile-content">
        <form action="" enctype="multipart/form-data" method="post">
          <?php if (!empty($errors['message'])):?>
            <div class="alert alert-dark">
              <?= implode("<br>", $errors['message']) ?>
            </div>
          <?php endif;?>
          <div class="input-group mb-3">
            <input type="text" class="form-control" id="fname" name="fname" placeholder="First Name" value="<?=$user_fname?>">
          </div>
          <div class="input-group mb-3">
            <input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name" value="<?=$user_lname?>">
          </div>
          <div class="input-group mb-3">
            <input type="text" class="form-control" id="address" name="address" placeholder="Address" value="<?=$user_address?>">
          </div>
          <div class="input-group mb-3">
            <input type="tel" class="form-control" id="contactnum" name="contactnum" placeholder="Contact Number" value="<?=$user_contact_num?>">
          </div>
          <input type="hidden" name="user_id" value="<?= $user_id ?>">
          <div class="input-group mb-2">
            <button type="submit" id="edit" name="edit" onsubmit="showEditAccount()" class="btn w-100 fs-6" style="background-color: #e50914; border-color: transparent;">Save Changes</button>
          </div>
        </form>
      </div>
    </div>

    <div id="changePassword" class="profile" style="display: none;">
      <div class="profile-header">
        <h1>Change Password</h1>
      </div>
      <div class="profile-content">
        <form id="changePasswordForm" action="" method="post" enctype="multipart/form-data">
          <?php if (!empty($errors)):?>
            <div class="alert alert-dark">
              <?= implode("<br>", $errors) ?>
            </div>
          <?php endif;?>
          <input type="hidden" name="user_id" value="<?= $user_id ?>">
          <div class="input-group mb-3">
            <input type="password" class="form-control" id="c_pass" name="c_pass" placeholder="Current Password">
          </div>
          <div class="input-group mb-3">
            <input type="password" class="form-control" id="n_pass" name="n_pass" placeholder="New Password">
          </div>
          <div class="input-group mb-3">
            <input type="password" class="form-control" id="cpass" name="cpass" placeholder="Confirm Password">
          </div>
          <div class="input-group mb-3">
            <input type="email" class="form-control" id="email" name="email" placeholder="Email">
          </div>
          <div class="input-group mb-2">
            <button type="submit" id="changepass" name="changepass" class="btn w-100 fs-6" style="background-color: #e50914; border-color: transparent;">Change Password</button>
          </div>
        </form>
      </div>
    
    </div>
    
    
<script src="<?=ROOT?>/assets/js/profile.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>
